<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="xywu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.2.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">xywu</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/ASL/" style="font-size: 10px;">ASL</a> <a href="/tags/Docker%E5%85%A5%E9%97%A8/" style="font-size: 10px;">Docker入门</a> <a href="/tags/Hash/" style="font-size: 10px;">Hash</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/LeetCode/" style="font-size: 10px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Make/" style="font-size: 10px;">Make</a> <a href="/tags/Maven/" style="font-size: 13.33px;">Maven</a> <a href="/tags/Python%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">Python基础</a> <a href="/tags/Restful/" style="font-size: 10px;">Restful</a> <a href="/tags/Scrum/" style="font-size: 10px;">Scrum</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 16.67px;">Spring Boot</a> <a href="/tags/Spring-Cloud/" style="font-size: 20px;">Spring Cloud</a> <a href="/tags/String/" style="font-size: 13.33px;">String</a> <a href="/tags/XML/" style="font-size: 10px;">XML</a> <a href="/tags/guns/" style="font-size: 10px;">guns</a> <a href="/tags/imook/" style="font-size: 10px;">imook</a> <a href="/tags/intern/" style="font-size: 10px;">intern</a> <a href="/tags/lab/" style="font-size: 10px;">lab</a> <a href="/tags/netty/" style="font-size: 10px;">netty</a> <a href="/tags/offer/" style="font-size: 10px;">offer</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/unix/" style="font-size: 10px;">unix</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" style="font-size: 10px;">分布式锁</a> <a href="/tags/%E5%8D%8E%E4%B8%BA%E7%AC%94%E8%AF%95/" style="font-size: 10px;">华为笔试</a> <a href="/tags/%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91/" style="font-size: 13.33px;">后台开发</a> <a href="/tags/%E5%9B%9E%E6%BA%AF%E6%B3%95/" style="font-size: 10px;">回溯法</a> <a href="/tags/%E5%B0%8F%E5%86%8C/" style="font-size: 10px;">小册</a> <a href="/tags/%E5%BB%96%E9%9B%AA%E5%B3%B0/" style="font-size: 10px;">廖雪峰</a> <a href="/tags/%E6%95%8F%E6%8D%B7%E6%96%B9%E6%B3%95/" style="font-size: 10px;">敏捷方法</a> <a href="/tags/%E6%97%A5%E5%8E%86%E5%AE%9E%E9%AA%8C/" style="font-size: 10px;">日历实验</a> <a href="/tags/%E6%97%A5%E5%8E%86%E8%AE%BE%E8%AE%A1/" style="font-size: 10px;">日历设计</a> <a href="/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88/" style="font-size: 10px;">系统架构师</a> <a href="/tags/%E8%BF%90%E7%AE%97%E7%AC%A6/" style="font-size: 10px;">运算符</a> <a href="/tags/%E9%87%8E%E5%A4%96%E6%B1%82%E7%94%9F/" style="font-size: 10px;">野外求生</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a developer.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Spring学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/Spring%E5%AD%A6%E4%B9%A0/" class="article-date">
  	<time datetime="2022-07-25T10:31:02.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/Spring%E5%AD%A6%E4%B9%A0/">
        Spring入门学习
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Spring-学习"><a href="#Spring-学习" class="headerlink" title="Spring 学习"></a>Spring 学习</h1><h2 id="Spring-基础介绍"><a href="#Spring-基础介绍" class="headerlink" title="Spring 基础介绍"></a>Spring 基础介绍</h2><p>学习轻量级的控制反转（IOC），面向切面（AOP）</p>
<h3 id="什么是-Spring？"><a href="#什么是-Spring？" class="headerlink" title="什么是 Spring？"></a>什么是 Spring？</h3><ul>
<li>通过 IOC 的技术达到松耦合的目的</li>
<li>AOP 的支持，允许通过分离应用的业务逻辑与系统级服务进行内聚性的开发。系统级的服务：与具体的业务代码无关，无论什么都需要应用的服务</li>
<li>包含并管理应用对象的配置和生命周期，这个意义上是一种容器</li>
<li>将简单的组件组合称为复杂的应用，这个意义上是框架</li>
</ul>
<h3 id="Why-Spring？"><a href="#Why-Spring？" class="headerlink" title="Why Spring？"></a>Why Spring？</h3><p>我们将对象的生命周期的管理交给了 Spring，所有的对象都叫做 bean，管理对象的容器叫做 bean 容器，省去了对象的创建和开销的过程。</p>
<p><strong>作用</strong></p>
<ul>
<li>容器</li>
<li>对多种技术的支持</li>
<li>AOP：事务管理，日志等</li>
<li>提供了众多方便的辅助类（JDBC 等）</li>
</ul>
<p><strong>适用范围</strong></p>
<ul>
<li>单独使用 Bean 容器，Bean 管理</li>
<li>使用 AOP 进行切面处理</li>
<li>其他的，如对消息的支持</li>
</ul>
<h3 id="Spring-框架"><a href="#Spring-框架" class="headerlink" title="Spring 框架"></a>Spring 框架</h3><p>框架与类库</p>
<ul>
<li>框架封装了逻辑、高内聚的，类库则是松散的工具的组合</li>
<li>框架专注于某一领域，类库更通用</li>
</ul>
<h2 id="Spring-IOC-容器"><a href="#Spring-IOC-容器" class="headerlink" title="Spring IOC 容器"></a>Spring IOC 容器</h2><h3 id="接口及面向接口编程"><a href="#接口及面向接口编程" class="headerlink" title="接口及面向接口编程"></a>接口及面向接口编程</h3><p>接口：声明没有实现<br>抽象类：与一般的一样，除了不能实例化</p>
<h3 id="什么是-IOC"><a href="#什么是-IOC" class="headerlink" title="什么是 IOC"></a>什么是 IOC</h3><p>控制反转，控制权的转移，我们并不负责依赖对象的创建和维护，而是需要使用的时候，由外部容器负责创建和维护。</p>
<p>DI（依赖注入），负责对象组装功能。在 IOC 容器在运行期间，动态的将某种依赖关系注入到对象当中。</p>
<p><strong>目的</strong> ：创建对象并且组装对象之间的关系。</p>
<p>获得依赖对象的过程被反转了。</p>
<h3 id="Spring-的-Bean-配置和初始化"><a href="#Spring-的-Bean-配置和初始化" class="headerlink" title="Spring 的 Bean 配置和初始化"></a>Spring 的 Bean 配置和初始化</h3><p>Spring 对于 Bean 整个的使用有两种方式：一种是通过注解，一种是基于 xml 的配置。</p>
<p>xml 里面<Bean> id，class（地址）</p>
<p>初始化过程，基础，两个包</p>
<ul>
<li>BeanFactory 提供配置结构和基本功能，加载并初始化 Bean</li>
<li>ApplicationContext 保存了 Bean 对象，也就是容器。加载方式：<br>加载本地文件；绝对路径<br>Classpath；相对路径<br>web 应用中依赖 servlet 或者 Listener</li>
</ul>
<h3 id="Spring-注入"><a href="#Spring-注入" class="headerlink" title="Spring 注入"></a>Spring 注入</h3><p>容器加载 bean 的时候，完成对变量的赋值行为。</p>
<p>常用的两种方式：设值注入，构造注入</p>
<h4 id="设值注入"><a href="#设值注入" class="headerlink" title="设值注入"></a>设值注入</h4><p>也就是通过 set 的方式注入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;injection&quot;</span> class=<span class="string">&quot;top.wuxiya.spring.Hello&quot;</span>&gt;</span><br><span class="line">    <span class="comment">//ref指向的是id，也就是一个bean的引用，赋值给命名叫$name的变量</span></span><br><span class="line">    &lt;property name=<span class="string">&quot;injectionDAO&quot;</span> ref=<span class="string">&quot;injectionDAO&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=<span class="string">&quot;injectionDAO&quot;</span> class=<span class="string">&quot;top.wuxiya.spring.HelloDAO&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<h4 id="构造注入"><a href="#构造注入" class="headerlink" title="构造注入"></a>构造注入</h4><p>也就是通过 构造方法的方式注入。</p>
<p><strong>注意：</strong>当通过构造注入的时候，构造器传入的变量名称必须与 name 设定的一致。</p>
<p>构造中，看 name。name 名称与传入的变量名匹配。</p>
<p>set 注入中，看类型。</p>
<p>一般来说最好都一样就不用区分了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    &lt;bean id=<span class="string">&quot;injectionService&quot;</span> class=<span class="string">&quot;top.wuxiya.spring.Hello&quot;</span>&gt;</span><br><span class="line">        <span class="comment">//ref指向的是id，也就是一个bean的引用，赋值给命名叫$name的变量</span></span><br><span class="line">        &lt;constructor-arg name=<span class="string">&quot;injectionDAO&quot;</span> ref=<span class="string">&quot;injectionDAO&quot;</span>&gt;&lt;/constructor-arg&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=<span class="string">&quot;injectionDAO&quot;</span> class=<span class="string">&quot;top.wuxiya.spring.HelloDAO&quot;</span>&gt;&lt;/bean&gt;</span><br><span class="line">`</span><br></pre></td></tr></table></figure>

<p>DAO——数据库<br>service——业务逻辑的部分</p>
<h2 id="Bean-的配置"><a href="#Bean-的配置" class="headerlink" title="Bean 的配置"></a>Bean 的配置</h2><h3 id="Bean-的配置项"><a href="#Bean-的配置项" class="headerlink" title="Bean 的配置项"></a>Bean 的配置项</h3><p>获取 Bean 的两种方式：通过 Id 来获取，通过 Bean 的类型来获取</p>
<ul>
<li>Id：唯一标识</li>
<li>Class：实例化的具体类——必须</li>
<li>Scope：作用域</li>
<li>构造器参数</li>
<li>Properties：属性</li>
<li>懒加载模式</li>
<li>自动装配的模式</li>
<li>初始化和销毁的方法</li>
</ul>
<h3 id="Bean-的作用域"><a href="#Bean-的作用域" class="headerlink" title="Bean 的作用域"></a>Bean 的作用域</h3><p><scope>：两种模式，singleton（默认），prototype</p>
<ul>
<li>singleton：单例模式，一个 Bean 容器中只存在一个。默认</li>
<li>prototype：每次请求都创建新的实例，destroy 方式不生效</li>
<li>request：每次 http 请求创建一个实例且仅在但钱 request 内有效</li>
<li>session：同上，当前 session 中有效</li>
<li>glodbal session：单点登陆？？</li>
</ul>
<h3 id="Bean-的生命周期"><a href="#Bean-的生命周期" class="headerlink" title="Bean 的生命周期"></a>Bean 的生命周期</h3><p><strong>初始化两种</strong></p>
<ul>
<li>一种为在 Bean 声明中添加 init-method&#x3D;”methodName”</li>
<li>实现 InitializingBean 接口，覆盖 afterPropertiesSet()，自动调用这个方法</li>
</ul>
<p><strong>销毁两种</strong></p>
<ul>
<li>一种为在 Bean 声明中添加 destory-method&#x3D;”methodName,cleanup”</li>
<li>实现 DisposableBean 接口，覆盖 destroy()，自动调用这个方法</li>
</ul>
<p><strong>全局初始化和销毁方法</strong><br>在 beans 中添加,default-init-method&#x3D;”name”,default-destory-method&#x3D;”name”</p>
<p>默认的方法可以不被实现，并且只要局部有一种实现就被覆盖。</p>
<p>局部初始化的两种方式，必须实现，其中接口的优先级大于方法的添加。</p>
<h3 id="Aware-接口"><a href="#Aware-接口" class="headerlink" title="Aware 接口"></a>Aware 接口</h3><ul>
<li>实现了 Aware 接口的 bean 在初始化之后，可以获取对应资源</li>
<li>对 Spring 进行简单的扩展提供了方便的入口</li>
<li>可以对 Spring 对应资源进行操作（慎重）</li>
</ul>
<p>比如得到加载当前 bean 的上下文</p>
<h3 id="Bean-的自动装配（Autowiring）"><a href="#Bean-的自动装配（Autowiring）" class="headerlink" title="Bean 的自动装配（Autowiring）"></a>Bean 的自动装配（Autowiring）</h3><ul>
<li>No 不做任何操作，默认</li>
<li>byname：根据属性名。设置<default-autowiring>，并且需要设置 set 方法。这个和 set 注入类似（看传入名），只不过不用再每一个 bean 里面显示声明 property。</li>
<li>byType：bean 的类型。多个类型抛异常。和 bean 的 ID 没有关系，在 set 方法（看类型）中匹配类型。</li>
<li>constructor：应用于构造器参数。在构造方法中查找构造器方法传入的类型。没有找到抛异常</li>
</ul>
<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><p>针对资源文件的统一接口</p>
<h2 id="Bean-的注解"><a href="#Bean-的注解" class="headerlink" title="Bean 的注解"></a>Bean 的注解</h2><h3 id="Bean-管理的类注解实现"><a href="#Bean-管理的类注解实现" class="headerlink" title="Bean 管理的类注解实现"></a>Bean 管理的类注解实现</h3><p>类的注解</p>
<ul>
<li>@Component 是一个通用注解，可用于任何 bean</li>
<li>@Repository：用于注解 DAO 类，即持久层</li>
<li>@Service：Service 类，服务层</li>
<li>@Controller 用于 Controller 类，即控制层（MVC）</li>
</ul>
<p>元注解：许多注解可以作为自己的代码，即“元数据注解”。可以用于领域给注解。还可以定制注解</p>
<h4 id="类的自动检测及-Bean-的注册"><a href="#类的自动检测及-Bean-的注册" class="headerlink" title="类的自动检测及 Bean 的注册"></a>类的自动检测及 Bean 的注册</h4><ul>
<li>默认情况下，类被自动发现并注册 bean 的条件是：使用@Component，@Repository，@Service，@Controller 注解或者使用@Component 的自定义注解</li>
<li>使用过滤器进行自定义扫描，修改自动发现的行文</li>
<li>还可以禁用自动发现与注册</li>
</ul>
<h4 id="定义-bean"><a href="#定义-bean" class="headerlink" title="定义 bean"></a>定义 bean</h4><ul>
<li>可以显示指定 Bean 的 name。否则默认是类名的小写。</li>
<li>还可以自定义命名的规则（一定要包含一个无参的构造器）。</li>
</ul>
<h4 id="作用域-Scope"><a href="#作用域-Scope" class="headerlink" title="作用域@Scope"></a>作用域@Scope</h4><ul>
<li>@Scope(“prototype”)<br>@Repository</li>
<li>也可以自定义设置 scope</li>
</ul>
<h4 id="代理方式"><a href="#代理方式" class="headerlink" title="代理方式"></a>代理方式</h4><p>使用 scoped-proxy 属性指定代理，有三个值可选：no，interfaces，targetClass</p>
<h3 id="Bean-的（Autowiring）注解说明"><a href="#Bean-的（Autowiring）注解说明" class="headerlink" title="Bean 的（Autowiring）注解说明"></a>Bean 的（Autowiring）注解说明</h3><h4 id="Required（不常用）"><a href="#Required（不常用）" class="headerlink" title="@Required（不常用）"></a>@Required（不常用）</h4><ul>
<li>是用于 bean 属性的 setter 方法</li>
<li>表示受影响的 bean 属性必须在配置时被填充，通过在 bean 定义或通过自动装配一个明确的属性值</li>
</ul>
<h4 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h4><p>使用 1</p>
<ul>
<li>传统的 setter 方法</li>
<li>也可以用于构造器或者成员变量</li>
<li>我们可以注解那些众所周知的解析依赖性接口，比如：BeanFactory，MessageSource 等</li>
</ul>
<p>注意</p>
<ul>
<li>默认情况下，如果找不到和实施的 bean 会抛出异常，所有可以用@Autowired(required&#x3D;false)来避免</li>
<li>每一个类只能有一个构造器被标注为 true</li>
<li>如果为 true 的必要属性，那么建议用@Resource</li>
</ul>
<p>使用 2</p>
<ul>
<li>可以通过添加注解给需要该类型实例的数组的字段和方法，以提供 ApplicationContext 中所有特定类型的 bean<br>public void setFunc(Set<BeanType> name){<br>this.name&#x3D;name;<br>}<br>List<BeanType>;<br>Map&lt;String,BeanType&gt;(String 为 bean 的 id)</li>
<li>如果希望数组有序，可以让 bean 实现@Order 注解（Order 只针对 List 或 set）</li>
</ul>
<p>注意<br>@Autowired 是由两种类型的 Bean 进行处理的，因此自定义这两种类的时候，我们需要通过</p>
<h4 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h4><p>可以指定特定的唯一的 bean，当子类有多个类型的时候。</p>
<p>我们一般用@Resource 来通过注解，这是一个与所声明类型无关的匹配过程。</p>
<ul>
<li>@Auto 用于属性，构造器，多参数方法，允许在参数级别使用@Qual 缩小范围</li>
<li>@Resource 适用于成员变量、只有一个参数的 setter 方法，使用构造器，多参数用@Qual</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired()</span></span><br><span class="line"><span class="meta">@Qualifier(&quot;beanImplTwo&quot;)</span></span><br><span class="line"><span class="keyword">private</span> BeanInterface beanInterface;</span><br></pre></td></tr></table></figure>

<h3 id="基于-Java-的容器注解"><a href="#基于-Java-的容器注解" class="headerlink" title="基于 Java 的容器注解"></a>基于 Java 的容器注解</h3><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><ul>
<li>@Configuration(类注解，相当于一个配置类)<br>@Bean(方法注解)<br>public Myservice myService(){<br>return new MyserviceImpl();<br>&#x2F;&#x2F;相当于定义了一个 id 叫做 myService 的 Bean<br>}</li>
</ul>
<h4 id="Bean（默认单例）"><a href="#Bean（默认单例）" class="headerlink" title="@Bean（默认单例）"></a>@Bean（默认单例）</h4><ul>
<li>自定义 Bean 的那么@Bean(name&#x3D;”myName”)。默认的是方法的名称<br>@Bean(init-method&#x3D;””)<br>@Bean(destroyMethod&#x3D;””)</li>
</ul>
<h4 id="ImportResource，加载资源文件"><a href="#ImportResource，加载资源文件" class="headerlink" title="@ImportResource，加载资源文件"></a>@ImportResource，加载资源文件</h4><p>配置数据库<br>在 xml 中，用&lt;context:property-placeholder location&#x3D;”….&#x2F;jdbc.properties”&gt;</p>
<p>下面用${jdbc.url}(username,password)</p>
<p>仍然</p>
<p>@Configuration<br>@ImportResource(“classpath:…”)</p>
<p>@Value(“${jdbc.url}”)<br>@Value(“${jdbc.username}”)</p>
<ul>
<li><strong>需要注意的是，username 拿到的是登录系统的用户名，因此一般来说数据库的用户名都加 jdbc</strong></li>
</ul>
<p>也就说与操作系统重复的都需要进行性注意</p>
<h4 id="Scope"><a href="#Scope" class="headerlink" title="@Scope"></a>@Scope</h4><ul>
<li>@Bean<br>@Scope(value&#x3D;”session”,proxyMode&#x3D;)</li>
</ul>
<h4 id="基于泛型的自动装配"><a href="#基于泛型的自动装配" class="headerlink" title="基于泛型的自动装配"></a>基于泛型的自动装配</h4><h3 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h3><ul>
<li>注解变量或者 setter</li>
<li>@–(name&#x3D;””)，默认是属性名和 setter 方法得出</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/" rel="tag">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0/">微服务系列学习</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-XML学习手册" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/XML%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C/" class="article-date">
  	<time datetime="2022-07-25T10:31:02.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/XML%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C/">
        XML学习手册
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h3><ul>
<li>version</li>
<li>encoding：默认是 UTF-8</li>
<li>如果 encoding&#x3D;”GB2312”，就可以在其中使用简体中文。还有 ISO-8858-1</li>
<li>注释用 <strong><!--开始，结束--></strong> 来包含。不能放在第一项，因为声明必须第一行，不能放在任何一个标记中</li>
</ul>
<h3 id="形式良好的-XML-文档"><a href="#形式良好的-XML-文档" class="headerlink" title="形式良好的 XML 文档"></a>形式良好的 XML 文档</h3><ul>
<li>对大小写敏感</li>
<li>必须有根元素</li>
<li>属性值必须加引号</li>
<li>不可以加特殊字符，需要引用</li>
<li>会保留空格</li>
</ul>
<h3 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h3><p><strong>元素</strong></p>
<ul>
<li>字母数字和其他</li>
<li>不能以数字或者标点开始</li>
<li>不能以 xml（各种大小写）开始</li>
<li>名称不能包含空格</li>
</ul>
<p><strong>最佳</strong><br>比较短；<br>避免：- . :等，用下划线</p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>尽量避免使用属性，与数据有关的都用元素来描述，属性来提供与数据无关的信息。</p>
<p>元数据（有关数据的数据）应当存储为属性，而数据本身应当存储为元素。</p>
<h3 id="xml-验证"><a href="#xml-验证" class="headerlink" title="xml 验证"></a>xml 验证</h3><p>拥有正确语法的 XML 被称为“形式良好”的 XML。</p>
<p>通过 DTD 验证的 XML 是“合法”的 XML。</p>
<h4 id="XML-DTD-Document-Type-Definition"><a href="#XML-DTD-Document-Type-Definition" class="headerlink" title="XML DTD(Document Type Definition)"></a>XML DTD(Document Type Definition)</h4><p>XML 使用 DTD 来描述数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;ISO-8859-1&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">note</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;Note.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="XML-Schema"><a href="#XML-Schema" class="headerlink" title="XML Schema"></a>XML Schema</h4><p>W3C 支持一种基于 XML 的 DTD 代替者，它名为 XML Schema：</p>
<h3 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h3><p>我们可以采用 CSS 和 XSLT 来显示 XML，一般提倡 XSLT</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;ISO-8859-1&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;simple.xsl&quot;</span>?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><p>当发生冲突的时候，我们可以采用两种方式解决</p>
<h4 id="使用前缀来避免命名冲突"><a href="#使用前缀来避免命名冲突" class="headerlink" title="使用前缀来避免命名冲突"></a>使用前缀来避免命名冲突</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h:table</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h:tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">h:tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h:table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="使用命名空间（Namespaces）"><a href="#使用命名空间（Namespaces）" class="headerlink" title="使用命名空间（Namespaces）"></a>使用命名空间（Namespaces）</h4><pre><code>    xmlns:namespace-prefix=&quot;namespaceURI&quot;
</code></pre>
<p>与仅仅使用前缀不同，我们为 <table> 标签添加了一个 xmlns 属性，这样就为前缀赋予了一个与某个命名空间相关联的限定名称。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h:table</span> <span class="attr">xmlns:h</span>=<span class="string">&quot;http://www.w3.org/TR/html4/&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h:tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h:td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">h:td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">h:tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h:table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>默认的命名空间</p>
<pre><code>    xmlns=&quot;namespaceURI&quot;
</code></pre>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/TR/html4/&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span>Apples<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bananas<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="XML-CDATA-忽略解析"><a href="#XML-CDATA-忽略解析" class="headerlink" title="XML CDATA 忽略解析"></a>XML CDATA 忽略解析</h3><p>PCDATA 指的是被解析的字符数据（Parsed Character Data）。</p>
<p>XML 解析器通常会解析 XML 文档中所有的文本。</p>
<p>非法的 XML 字符必须被替换为实体引用（entity reference）。<br>术语 CDATA 指的是不应由 XML 解析器进行解析的文本数据（Unparsed Character Data）。</p>
<p>在 XML 元素中，”&lt;” 和 “&amp;” 是非法的。</p>
<p>“&lt;” 会产生错误，因为解析器会把该字符解释为新元素的开始。</p>
<p>“&amp;” 也会产生错误，因为解析器会把该字符解释为字符实体的开始。</p>
<p>某些文本，比如 JavaScript 代码，包含大量 “&lt;” 或 “&amp;” 字符。为了避免错误，可以将脚本代码定义为 CDATA。</p>
<p><strong>CDATA</strong> 部分中的所有内容都会被解析器忽略。</p>
<p>CDATA 部分由 <strong><![CDATA[" 开始，由 "]]></strong> 结束：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">&lt;![CDATA[</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">function matchwo(a,b)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">if (a &lt; b &amp;&amp; a &lt; 0) then</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  return 1;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">else</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  return 0;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">&#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">]]&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>关于 CDATA 部分的注释：</strong></p>
<ul>
<li>CDATA 部分不能包含字符串 “]]&gt;”。也不允许嵌套的 CDATA 部分。</li>
<li>标记 CDATA 部分结尾的 “]]&gt;” 不能包含空格或折行。</li>
</ul>
<h2 id="XSL（Extensible-Stylesheet-Language）显示-XSL"><a href="#XSL（Extensible-Stylesheet-Language）显示-XSL" class="headerlink" title="XSL（Extensible Stylesheet Language）显示 XSL"></a>XSL（Extensible Stylesheet Language）显示 XSL</h2><p>XSLT 是一种用来转换 XML 文档结构的语言，一个 XSL 文件本身就是一个 XML 文档。</p>
<p>XSL 包含三部分：</p>
<blockquote>
<p>XSLT——转换 XML 文档<br>XPath——浏览定位 XML 文档<br>XSL-FO——格式化 XML 文档</p>
</blockquote>
<h3 id="CSS-与-XSL"><a href="#CSS-与-XSL" class="headerlink" title="CSS 与 XSL"></a>CSS 与 XSL</h3><p>CSS 很多缺点：不能重排序，不能判断哪个元素显示；不能统计计算元素中的数据</p>
<h3 id="技术难题"><a href="#技术难题" class="headerlink" title="技术难题"></a>技术难题</h3><ul>
<li>从源 XML 文档读取信息：<br>XPath：定位<br>XSLT：定位之后读取</li>
<li>目标 XML 写入信息<br>XSLT 元素</li>
</ul>
<h4 id="模板驱动模型"><a href="#模板驱动模型" class="headerlink" title="模板驱动模型"></a>模板驱动模型</h4><p>XSL 提供了一种归并功能。XSL 样式表包含了一个描述结果结构的模板。</p>
<h3 id="XPath"><a href="#XPath" class="headerlink" title="XPath"></a>XPath</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">definition</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">definition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">definition</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">definition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">item</span> <span class="attr">version</span>=<span class="string">&quot;9.9&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">definition</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">definition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&#x2F;root&#x2F;item[position()&#x3D;1]（第一个 title）<br>&#x2F;root&#x2F;item&#x2F;definition&#x2F;title（第二个 title）<br>&#x2F;root&#x2F;item（全部 item）<br>.&#x2F;@version（选择属性节点）</p>
<h3 id="XSLT"><a href="#XSLT" class="headerlink" title="XSLT"></a>XSLT</h3><ul>
<li><p>有 37 个元素</p>
</li>
<li><p>本身是一个 xml 文件</p>
</li>
<li><p>在源 xml 文件中引用样式表</p>
<pre><code>  &lt;?xml-stylesheet type=&quot;text/xsl href=&quot;URI&quot;&quot;?&gt;
</code></pre>
</li>
<li></li>
</ul>
<h4 id="声明-1"><a href="#声明-1" class="headerlink" title="声明"></a>声明</h4><p>从根元素开始</p>
<ul>
<li>&lt;xsl:stylesheet version&#x3D;”1.0” xmlns:xsl&#x3D;”URI”&gt; 表明这是一个样式表文件，URI 提供了定义的命名空间</li>
<li>&lt;xsl:output encoding&#x3D;””&gt;指定输出的 HTML 使用的编码</li>
<li>&lt;xsl:template match&#x3D;”&#x2F;“&gt;指明了根</li>
</ul>
<h2 id="Java-处理-XML"><a href="#Java-处理-XML" class="headerlink" title="Java 处理 XML"></a>Java 处理 XML</h2><p>SAX，DOM 是解析器所采用的两种重要的解析 API</p>
<h4 id="DOM-文档对象模型"><a href="#DOM-文档对象模型" class="headerlink" title="DOM(文档对象模型)"></a>DOM(文档对象模型)</h4><p>用于描述节点与节点之间的关系<br>较好的随机访问性能<br>平台无关<br>基于树的整颗对象树，建立在内存中</p>
<ul>
<li>创建 DocumentBuilderFactory，用该对象创建 DocumentBuilder。</li>
<li>创建 DocumentBuilder。用它来解析得到 Document 对象。</li>
<li>解析文件以创建 Document 对象。</li>
</ul>
<h4 id="SAX-Simple-API-for-XML"><a href="#SAX-Simple-API-for-XML" class="headerlink" title="SAX(Simple API for XML)"></a>SAX(Simple API for XML)</h4><p>顺序遍历文档，然后产生所有节点事件，在内存中只保留当前处理部分。</p>
<h5 id="适用"><a href="#适用" class="headerlink" title="适用"></a>适用</h5><blockquote>
<p>大数据量有优势<br>在文档中检索一个特定的值<br>创建文档子集，以便后继 DOM 处理</p>
</blockquote>
<h5 id="基于事件的机制"><a href="#基于事件的机制" class="headerlink" title="基于事件的机制"></a>基于事件的机制</h5><p><strong>优点</strong><br>与 xml 文件大小无关；不需要等到文档解析结束，就可以开始处理</p>
<p><strong>缺点</strong><br>不允许随机访问，比 DOM 复杂，不可能对数据进行更改，或者返回数据流之前的数据</p>
<p>两个可以结合使用</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaWeb/" rel="tag">JavaWeb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/XML/" rel="tag">XML</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">技术学习笔记</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-make学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/make%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  	<time datetime="2022-07-25T10:31:02.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/make%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
        Make学习
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Make"><a href="#Make" class="headerlink" title="Make"></a>Make</h2><h3 id="Make-功能简介"><a href="#Make-功能简介" class="headerlink" title="Make 功能简介"></a>Make 功能简介</h3><p>通过比较对应文件（目标，规则的依赖）的最后修改时间，来决定哪些文件需要更新。只更改修改的源文件。</p>
<ul>
<li>没有被编译过的源文件，进行编译并且进行链接</li>
<li>在上次执行 make 之后修改过的 C 源代码文件，会重新编译</li>
<li>头文件在上一次执行 make 之后被修改，那么所有包含此头文件的 C 源文件会被重新编译</li>
</ul>
<h3 id="Makefile-规则介绍"><a href="#Makefile-规则介绍" class="headerlink" title="Makefile 规则介绍"></a>Makefile 规则介绍</h3><blockquote>
<p>target :prerequisites<br>command</p>
</blockquote>
<p>target:目标。可以是目标文件，也可以是动作的名称（比如 clean），称之为伪目标。<br>prerequisites：规则的依赖。就是需要的文件列表（多个）。太长用反斜杠，后面不能有空格。<br>command：规则的命令行。</p>
<h3 id="Make-的工作方式"><a href="#Make-的工作方式" class="headerlink" title="Make 的工作方式"></a>Make 的工作方式</h3><p>默认情况下执行第一个规则，第一个目标称为最终目的。当修改了任何的源文件和头文件后，执行 make 会重建终极目标。（这里 make 决定哪些需要更新，只要依赖更新，自己也要更新）<br>注意，.o 文件之所以更新，是因为它出现在了终极目标的依赖列表里面，如果某个规则不是终极目标所依赖的，那么它就不会被执行，除非明确指出需要执行这个规则。<br>处理 edit 的三种情况：</p>
<ul>
<li>edit 不存在，执行规则创建 edit</li>
<li>存在，依赖文件比他更新，根据规则重新链接生成 edit</li>
<li>它比任何一个依赖文件都更新，那么什么也不做</li>
</ul>
<p>从最终目的的第一个依赖文件寻找规则（main.o,kbd.o…），如果第一个依赖其他的，同样为它寻找规则。。。通常源文件和头文件已经存在，不需要重建他们的规则，所有都找到之后，从最好一个开始回退执行，最终完成 edit 的第一个依赖文件的创建和更新，然后是第二个，第三个。<br>整个过程 make 只是负责执行规则，对依赖关系的正确性和规则所定义的命令的正确性不做任何判断 。就是说，make 不做错误检查。<br>我们需要在提供给 make 程序的 Makefile 中保证其依赖关系的正确性，和执行命令的正确性。</p>
<p>有变量，基本的元素，规则，rules 可以有 if，else，也可以有 shell 语言。<br>任何文件都可以有依赖，<br>第一层：main；第二层：.o；第三层：.c,.h 文件。需要分开编译，效率问题。<br>makefile 描述编译的层次结构，可以分析修改的时间。<br>makefile 自动更新，自更新指令，目标 makefile（git pull），自己本身的命令出现变化。在运行 make 的时候，首先自动扫描 makefile 进行更新。直到没有 makefile 更新才停止。<br>make 后来加了 if，变量的东西。也有 function，还有自动匹配的功能。<br>ant，build（java），another neat tool，吐槽 make，解决 tab 的问题，用 xml 来描述规则，默认的是 build.xml，可以 import 一些包，可以进行扩展。<br>make 的问题，移植性的问题。<br>vc++微软的 c++和一般的不同，windows 用 vc++写的。</p>
<h2 id="shell-的-build-in"><a href="#shell-的-build-in" class="headerlink" title="shell 的 build in"></a>shell 的 build in</h2><p>首先判断是否为内建，会更快。<br>命令行；为占位，相当于 nop。<br>.用来执行文件，相当于 source。bash 会新打开一个 shell，source 相当于 include。子 shell 相当于子进程，用 source 会得到子 shell 的改变。<br>break 和 continue。break 可以带 1、2、3 等，也就是打破几层的循环。<br>evol echo “$$n”,也就是替换两次。指令强大，但是不安全。<br>exec，执行跳转到另外一个再也不回来。<br>export，调整当前 shell 的环境变量，新增环境变量。变量和环境变量不同，环境变量，export 会将普通变量变为环境变量。<br>hash 表相对于 shell 临时。<br>getoptions，带：一定要读参数，否则要报错。是对命令行的一个抽象。</p>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>以前一个 cpu 一个核，一个核一个线程。<br>单核时代的多线和单线，有一点区别。<br>js 只能单线程（同一个页面），代码是异步的，很容易。但是 C 里面不容易用异步。</p>
<p>单核时代：单线程时代异步特别复杂的问题，代码难写；写成多进程，分时。单核多线程，利用分时技术，将时间分配给不同的任务，相当于线程的切换。</p>
<p>多核时代：可以提高计算效率。分时系统出现了进程的概念，没有数据共享。</p>
<h3 id="进程、线程竞争"><a href="#进程、线程竞争" class="headerlink" title="进程、线程竞争"></a>进程、线程竞争</h3><p>又出现了多线程的问题，线程之间的关系和同步等的问题。</p>
<ul>
<li>线程调度的问题，死锁。</li>
<li>state，状态。竞争，数据竞争。</li>
</ul>
<p>都可以归结为竞争条件，risk condition，情况与执行的先后顺序有关。解决办法，同步，一段操作原子化。由于 data conruption。</p>
<p>cache，两个 cpu，cache 不共享，但是内存共享。数据没有写到内存中，还在 cache 中。Java 中的关键字 GuardedBy，要求原子化和数据同步，但是很慢，将 cache 中的数据既回去。<br>一个 cpu，一个核 1，2 级缓存，多核 3 级缓存共享。开始是多读数据，后来用 signal。</p>
<p>对线程来说，堆是共享的，栈私有。statelist，只有操作，没有数据，也就没有 risk condition。<br>重入锁以线程为单位；pthread 是互斥锁；Java 中是重入锁。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Make/" rel="tag">Make</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">技术学习笔记</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-python学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/python%E5%AD%A6%E4%B9%A0/" class="article-date">
  	<time datetime="2022-07-25T10:31:02.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/python%E5%AD%A6%E4%B9%A0/">
        Python学习
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="实用技巧"><a href="#实用技巧" class="headerlink" title="实用技巧"></a>实用技巧</h2><h3 id="继承与多态"><a href="#继承与多态" class="headerlink" title="继承与多态"></a>继承与多态</h3><p>python 是动态类型，可以动态绑定属性；java 是静态类型</p>
<p>在传入类型中：如 Animal，里面有 run 方法，java 必须为 Animal 类型或者其子类，python 不要求，只要里面有 run 方法就行</p>
<h3 id="类型检查"><a href="#类型检查" class="headerlink" title="类型检查"></a>类型检查</h3><ul>
<li>字符串用：not in(‘male’,’female’)类似来判断固定的输入</li>
<li>数据类型的检查: not isinstance(x,(int,float,str))，来固定类型</li>
<li>getImage：首先看传入的有没有 read 方法，hasattr()</li>
</ul>
<h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><ul>
<li>类属性：在函数中调用用类名+变量名</li>
<li>实例属性：self.变量名</li>
<li>私有属性：__name</li>
<li>变量的域：父类加入__slots__可以规定自己的变量是什么；子类如果没有，那么不继承，子类如果设置了它，那么继承父类的它</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python%E5%9F%BA%E7%A1%80/" rel="tag">Python基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BB%96%E9%9B%AA%E5%B3%B0/" rel="tag">廖雪峰</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">技术学习笔记</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-使用netty构建websocket服务器" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/%E4%BD%BF%E7%94%A8netty%E6%9E%84%E5%BB%BAwebsocket%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  	<time datetime="2022-07-25T10:31:02.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/%E4%BD%BF%E7%94%A8netty%E6%9E%84%E5%BB%BAwebsocket%E6%9C%8D%E5%8A%A1%E5%99%A8/">
        使用netty构建websocket服务器
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="手段"><a href="#手段" class="headerlink" title="手段"></a>手段</h2><ul>
<li>ajax 轮询：异步每隔一定时间发消息问服务器有没有消息，死循环获取后端数据</li>
<li>Long pull：阻塞的模型，一直卡住，直到服务器返回 response</li>
<li>websocket：一直保持链接，持久化协议</li>
</ul>
<h2 id="websocket-的-api"><a href="#websocket-的-api" class="headerlink" title="websocket 的 api"></a>websocket 的 api</h2><ul>
<li>let socket&#x3D;new WebSocket(“ws:&#x2F;&#x2F;[ip]:[port]”)</li>
<li>生命周期：onopen(),onmessage(),onerror(),onclose()</li>
<li>主动方法：Socket.send(),Socket.close()</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/" rel="tag">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/netty/" rel="tag">netty</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0/">微服务系列学习</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Hash表平均查找长度ASL计算" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/Hash%E8%A1%A8%E5%B9%B3%E5%9D%87%E6%9F%A5%E6%89%BE%E9%95%BF%E5%BA%A6ASL%E8%AE%A1%E7%AE%97/" class="article-date">
  	<time datetime="2022-07-25T10:31:00.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/Hash%E8%A1%A8%E5%B9%B3%E5%9D%87%E6%9F%A5%E6%89%BE%E9%95%BF%E5%BA%A6ASL%E8%AE%A1%E7%AE%97/">
        Hash表平均查找长度ASL计算
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>ASL 指的是平均查找时间</p>
<p><strong>关键字序列</strong>：（7、8、30、11、18、9、14）</p>
<p><strong>散列函数</strong>： H(Key) &#x3D; (key x 3) MOD 7</p>
<h2 id="装载因子：-0-7"><a href="#装载因子：-0-7" class="headerlink" title="装载因子： 0.7"></a><strong>装载因子</strong>： 0.7</h2><hr>
<h2 id="处理冲突：-线性探测再散列法"><a href="#处理冲突：-线性探测再散列法" class="headerlink" title="处理冲突： 线性探测再散列法"></a>处理冲突： 线性探测再散列法</h2><h3 id="查找成功的-ASL-计算方法："><a href="#查找成功的-ASL-计算方法：" class="headerlink" title="查找成功的 ASL 计算方法："></a>查找成功的 ASL 计算方法：</h3><p>因为现在的数据是 7 个，填充因子是 0.7。所以数组大小&#x3D;7&#x2F;0.7&#x3D;10，即写出来的散列表大小为 10，下标从 0~9。<br>第一个元素 7，带入散列函数，计算得 0。<br>第二个元素 8，带入散列函数，计算得 3。<br>第三个元素 30，带入散列函数，计算得 6。<br>第四个元素 11，带入散列函数，计算得 5。<br>第五个元素 18，带入散列函数，计算得 5；此时和 11 冲突，使用线性探测法，得 7。<br>第六个元素 9，带入散列函数，计算得 6；此时和 30 冲突，使用线性探测法，得 8。<br>第七个元素 14，带入散列函数，计算得 0；此时和 7 冲突，使用线性探测法，得 1。<br>所以散列表：</p>
<table>
<thead>
<tr>
<th align="center">地址</th>
<th align="center">0</th>
<th align="center">1</th>
<th align="center">2</th>
<th align="center">3</th>
<th align="center">4</th>
<th align="center">5</th>
<th align="center">6</th>
<th align="center">7</th>
<th align="center">8</th>
<th align="center">9</th>
</tr>
</thead>
<tbody><tr>
<td align="center">key</td>
<td align="center">7</td>
<td align="center">14</td>
<td align="center"></td>
<td align="center">8</td>
<td align="center"></td>
<td align="center">11</td>
<td align="center">30</td>
<td align="center">18</td>
<td align="center">9</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">成功</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">3</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">不成功</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">5</td>
<td align="center">4</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>所以查找成功的计算：<br>如果查找 7，则需要查找 1 次。<br>如果查找 8，则需要查找 1 次。<br>如果查找 30，则需要查找 1 次。<br>如果查找 11，则需要查找 1 次。<br>如果查找 18，则需要查找 3 次：第一次查找地址 5，第二次查找地址 6，第三次查找地址 7，查找成功。<br>如果查找 9，则需要查找 3 次：第一次查找地址 6，第二次查找地址 7，第三次查找地址 8，查找成功。<br>如果查找地址 14，则需要查找 2 次：第一次查找地址 0，第二次查找地址 1，查找成功。<br>所以，<strong>ASL&#x3D;（1+2+1+1+1+3+3）&#x2F; 7&#x3D;12&#x2F; 7</strong></p>
<hr>
<h3 id="查找不成功的-ASL-计算方法"><a href="#查找不成功的-ASL-计算方法" class="headerlink" title="查找不成功的 ASL 计算方法"></a>查找不成功的 ASL 计算方法</h3><p><strong>1. 定义什么叫查找不成功</strong><br>举个例子来说吧。在已知上面散列表的基础上，如果要查找 <strong>key 为 4</strong> 的关键字。根据散列函数可以计算 Hash(key)&#x3D;Hash(4)&#x3D;5。此时在地址为 5 的地方取出那个数字，发现 key&#x3D;11，不等于 4。这就说明在装填的时候会发生冲突。根据冲突处理方法，会继续检测地址为 6 的值，发现 key&#x3D;30，依然不等。这个时候到了<strong>地址为 6</strong>，但是依然没有找到。那么就说明根本就没有 key&#x3D;4 这个关键字，<strong>说明本次查找不成功。注意：为什么到地址 6？因为散列函数中有 mod7 ，对应的地址为 0~6，即 0~6 查找失败的查找次数。</strong><br>再举一个例子。查找 <strong>key 为 0</strong>的关键字，根据散列函数可以计算 Hash(key)&#x3D;Hash(0)&#x3D;0。此时在地址为 0 的地方取出那个数字，发现 key&#x3D;7，不等于 0。这就说明在装填的时候会发生冲突。根据冲突处理方法，会继续检测地址为 1 的值，发现 key&#x3D;14，依然不等。这个时候到了 <strong>地址为 2，发现为空，依然没有找到</strong>。所以停止查找，本次查找不成功。因为如果 key&#x3D;0 这个关键字存在的话，依照冲突处理函数，就一定能找到它。总不能丢了吧。</p>
<p><strong>2. 根据第一点定义的不成功，依次推下去：</strong><br>查找地址为 0 的值所需要的次数为 3，<br>查找地址为 1 的值所需要的次数为 2，<br>查找地址为 2 的值所需要的次数为 1，<br>查找地址为 3 的值所需要的次数为 2，<br>查找地址为 4 的值所需要的次数为 1，<br>查找地址为 5 的值所需要的次数为 5，<br>查找地址为 6 的值所需要的次数为 4。 3.计算<br><strong>查找不成功 ASL&#x3D;（3+2+1+2+1+5+4）&#x2F; 7&#x3D;18&#x2F; 7</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qixinbo/p/7782314.html">原博客地址:https://www.cnblogs.com/qixinbo/p/7782314.html</a></p>
<hr>
<h2 id="链地址法"><a href="#链地址法" class="headerlink" title="链地址法"></a>链地址法</h2><p>假设散列表的长度是 13，散列函数为 H(K) &#x3D; k % 13，给定的关键字序列为{32， 14， 23， 01， 42， 20， 45， 27， 55， 24， 10， 53}。</p>
<p><img src="/hash/lalianasl.jpg" alt="拉链法"><br>查找成功时的平均查找长度：</p>
<p>ASL &#x3D; (1*6+2*4+3*1+4*1)&#x2F;12 &#x3D; 7&#x2F;4</p>
<p>查找不成功时的平均查找长度：</p>
<p>ASL &#x3D; (4+2+2+1+2+1)&#x2F;13</p>
<p><strong>注意：查找成功时，分母为哈希表元素个数，查找不成功时，分母为 mod 的 K 值。</strong></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ASL/" rel="tag">ASL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hash/" rel="tag">Hash</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">技术学习笔记</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Java字符串知识点" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/Java%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9F%A5%E8%AF%86%E7%82%B9/" class="article-date">
  	<time datetime="2022-07-25T10:31:00.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/Java%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9F%A5%E8%AF%86%E7%82%B9/">
        Java字符串相关知识点
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Java-intern-方法"><a href="#Java-intern-方法" class="headerlink" title="Java intern() 方法"></a>Java intern() 方法</h2><p>首先，对于不是 new 的字符串，如果是静态字符串，那么会直接添加到常量池中，如 str3；如果带有变量，那么不会入常量池，比如 str4。</p>
<p>str.intern()，内容与字符串相同，但一定取自具有唯一字符串的池。也就是说，每次到常量池中找字符串，如果存在，返回引用，不存在，添加后返回引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String str1=<span class="string">&quot;a&quot;</span>;</span><br><span class="line">String str2=<span class="string">&quot;b&quot;</span>;</span><br><span class="line">String str3=<span class="string">&quot;a&quot;</span>+<span class="string">&quot;b&quot;</span>;</span><br><span class="line">String str4=str1+str2;</span><br><span class="line">String str5=<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;ab&quot;</span>);</span><br><span class="line"></span><br><span class="line">str5.intern()==str3==str4.intern()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/String/" rel="tag">String</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/intern/" rel="tag">intern</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Java%E5%AD%97%E7%AC%A6%E4%B8%B2/">Java字符串</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-LeetCode回溯法题目" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/LeetCode%E5%9B%9E%E6%BA%AF%E6%B3%95%E9%A2%98%E7%9B%AE/" class="article-date">
  	<time datetime="2022-07-25T10:31:00.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/LeetCode%E5%9B%9E%E6%BA%AF%E6%B3%95%E9%A2%98%E7%9B%AE/">
        LeetCode回溯法经典题目
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="SubSet"><a href="#SubSet" class="headerlink" title="SubSet"></a>SubSet</h3><p>Given a set of distinct integers, S, return all possible subsets.</p>
<p>Note:</p>
<p>Elements in a subset must be in non-descending order.<br>The solution set must not contain duplicate subsets.</p>
<p>For example,<br>If S &#x3D;[1,2,3], a solution is:</p>
<blockquote>
<p>[<br>[3],<br>[1],<br>[2],<br>[1,2,3],<br>[1,3],<br>[2,3],<br>[1,2],<br>[]<br>]</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">subsets</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    backtrack(list, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), nums, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtrack</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; list , List&lt;Integer&gt; tempList, <span class="type">int</span> [] nums, <span class="type">int</span> start)</span>&#123;</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tempList));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; nums.length; i++)&#123;</span><br><span class="line">        tempList.add(nums[i]);</span><br><span class="line">        backtrack(list, tempList, nums, i + <span class="number">1</span>);</span><br><span class="line">        tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SubSet-ii"><a href="#SubSet-ii" class="headerlink" title="SubSet-ii"></a>SubSet-ii</h3><p>Given a collection of integers that might contain duplicates, S, return all possible subsets.</p>
<p>Note:</p>
<p>Elements in a subset must be in non-descending order.<br>The solution set must not contain duplicate subsets.</p>
<p>For example,<br>If S &#x3D;[1,2,2], a solution is:</p>
<blockquote>
<p>[<br>[2],<br>[1],<br>[1,2,2],<br>[2,2],<br>[1,2],<br>[]<br>]</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">subsetsWithDup</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    backtrack(list, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), nums, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtrack</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; list, List&lt;Integer&gt; tempList, <span class="type">int</span> [] nums, <span class="type">int</span> start)</span>&#123;</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tempList));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; nums.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; start &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>; <span class="comment">// skip duplicates</span></span><br><span class="line">        tempList.add(nums[i]);</span><br><span class="line">        backtrack(list, tempList, nums, i + <span class="number">1</span>);</span><br><span class="line">        tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Permutations"><a href="#Permutations" class="headerlink" title="Permutations"></a>Permutations</h3><p>Given a collection of numbers, return all possible permutations.</p>
<p>For example,<br>[1,2,3]have the following permutations:</p>
<blockquote>
<p>[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2], and[3,2,1].</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permute</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">   List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">   <span class="comment">// Arrays.sort(nums); // not necessary</span></span><br><span class="line">   backtrack(list, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), nums);</span><br><span class="line">   <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtrack</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; list, List&lt;Integer&gt; tempList, <span class="type">int</span> [] nums)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(tempList.size() == nums.length)&#123;</span><br><span class="line">      list.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tempList));</span><br><span class="line">   &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">         <span class="keyword">if</span>(tempList.contains(nums[i])) <span class="keyword">continue</span>; <span class="comment">// element already exists, skip</span></span><br><span class="line">         tempList.add(nums[i]);</span><br><span class="line">         backtrack(list, tempList, nums);</span><br><span class="line">         tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Permutations-ii"><a href="#Permutations-ii" class="headerlink" title="Permutations-ii"></a>Permutations-ii</h3><p>Given a collection of numbers that might contain duplicates, return all possible unique permutations.</p>
<p>For example,<br>[1,1,2]have the following unique permutations:</p>
<blockquote>
<p>[1,1,2],[1,2,1], and[2,1,1].</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permuteUnique</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    backtrack(list, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(), nums, <span class="keyword">new</span> <span class="title class_">boolean</span>[nums.length]);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">backtrack</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; list, List&lt;Integer&gt; tempList, <span class="type">int</span> [] nums, <span class="type">boolean</span> [] used)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tempList.size() == nums.length)&#123;</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(tempList));</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(used[i] || i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>] &amp;&amp; !used[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">//!used[i - 1]保证了i-1和i这个字母在同一层遍历中，used[i - 1]=true表明当前i是下一层</span></span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line">            tempList.add(nums[i]);</span><br><span class="line">            backtrack(list, tempList, nums, used);</span><br><span class="line">            used[i] = <span class="literal">false</span>;</span><br><span class="line">            tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于排列的问题，我们每次都要遍历整个 num，如果他有重复的字母，正因为需要遍历所有的 num，因此我们需要记录每一个字母的状态，保证在一个 epoch 里面，这一个和上一个字母一样的情况下，我们只使用一次当前的字母。</p>
<p>而其他的情况，不规定每一次要用所有的字母，从们按照顺序执行，已经在顺序中去除了重新遍历可能会得到之前用过的字母的情况，因此只需要 skip 掉重复的字母即可。</p>
<h2 id="树的遍历"><a href="#树的遍历" class="headerlink" title="树的遍历"></a>树的遍历</h2><h3 id="path-sum-li"><a href="#path-sum-li" class="headerlink" title="path-sum-li"></a>path-sum-li</h3><p>Given a binary tree and a sum, find all root-to-leaf paths where each path’s sum equals the given sum.</p>
<p>For example:<br>Given the below binary tree andsum &#x3D; 22,</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">      <span class="number">5</span></span><br><span class="line">     / \</span><br><span class="line">    <span class="number">4</span>   <span class="number">8</span></span><br><span class="line">   /   / \</span><br><span class="line">  <span class="number">11</span>  <span class="number">13</span>  <span class="number">4</span></span><br><span class="line"> /  \    / \</span><br><span class="line"><span class="number">7</span>    <span class="number">2</span>  <span class="number">5</span>   <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>return</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">   [<span class="number">5</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">2</span>],</span><br><span class="line">   [<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ArrayList&lt;Integer&gt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="title function_">pathSum</span><span class="params">(TreeNode root, <span class="type">int</span> sum)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">        dfs(root,sum,<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(TreeNode node,<span class="type">int</span> target,ArrayList&lt;Integer&gt; list)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        list.add(node.val);</span><br><span class="line">        <span class="keyword">if</span>(node.left==<span class="literal">null</span>&amp;&amp;node.right==<span class="literal">null</span>&amp;&amp;target==node.val)&#123;</span><br><span class="line">            result.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(list));</span><br><span class="line">            list.remove(list.size()-<span class="number">1</span>);<span class="comment">//注意此时必须进行回溯，因为left和right共同指向了list，当左节点符合时，有可能右节点也符合，因此必须撤销这一点</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(node.left,target-node.val,list);</span><br><span class="line">        dfs(node.right,target-node.val,list);</span><br><span class="line">        list.remove(list.size()-<span class="number">1</span>);<span class="comment">//同理，这里回溯是因为node的父节点的左右节点指向了同一个list，我们必须保证右节点，即node的兄弟的list不跟在node节点之后。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于树的回溯与遍历，从根节点到叶子节点，我们必须注意 path 中，在最后的叶子节点，对于新加入的点的回溯，因为 left 和 right 共同指向了 list，当左节点符合时，有可能右节点也符合，因此必须撤销这一点。</p>
<h3 id="binary-tree-maximum-path-sum"><a href="#binary-tree-maximum-path-sum" class="headerlink" title="binary-tree-maximum-path-sum"></a>binary-tree-maximum-path-sum</h3><p>任意 node 到任意 node</p>
<p>Given a binary tree, find the maximum path sum.</p>
<p>The path may start and end at any node in the tree.</p>
<p>For example:<br>Given the below binary tree,</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="number">1</span></span><br><span class="line"> / \</span><br><span class="line"><span class="number">2</span>   <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>Return 6</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxPathSum</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>)  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//当只有一个节点的时候，直接返回root的值</span></span><br><span class="line">        <span class="keyword">if</span>(root.left==<span class="literal">null</span>&amp;&amp;root.right==<span class="literal">null</span>) <span class="keyword">return</span> root.val;</span><br><span class="line"></span><br><span class="line">        max=Integer.MIN_VALUE;</span><br><span class="line">        getMax(root);</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMax</span><span class="params">(TreeNode node)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> left=Math.max(<span class="number">0</span>,getMax(node.left));</span><br><span class="line">        <span class="type">int</span> right=Math.max(<span class="number">0</span>,getMax(node.right));</span><br><span class="line">        max=Math.max(max,node.val+left+right);</span><br><span class="line">        <span class="comment">//返回当前节点下的最大路径，用于给上一层的left或者right</span></span><br><span class="line">        <span class="comment">//临时变量通过return传递，最大值通过全局max变量保存</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(left,right)+node.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%9E%E6%BA%AF%E6%B3%95/" rel="tag">回溯法</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/">算法学习</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Linux系统管理学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AD%A6%E4%B9%A0/" class="article-date">
  	<time datetime="2022-07-25T10:31:00.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%AD%A6%E4%B9%A0/">
        Linux系统管理
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>清理，编译，测试，运行，打包，集成测试，验证，部署整个周期</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><ul>
<li>groupId：（公司反写网址.项目名）【主项目的标识，实际的项目】</li>
<li>artiFactId：（项目名-模块名）【maven 的项目和我们的实际的项目不一样，maven 是模块化的，一个实际的项目被划分为多个模块。一个模块的标识】</li>
<li>version：【当前版本号，一般三个数字组成。第一个 0 表示大版本号，第二个 0 表示分支版本号，第三个 0 表示小版本号】<br>snapshot 快照<br>alpha 内部测试<br>beta 公测<br>Release 稳定<br>GA 正式发布</li>
<li>packaging：【maven 项目的打包方式，默认是 jar，还可以其他的 war，zip，pom 等等】</li>
</ul>
<h2 id="maven-常用的构建命令"><a href="#maven-常用的构建命令" class="headerlink" title="maven 常用的构建命令"></a>maven 常用的构建命令</h2><blockquote>
<p>mvn -v<br>mvn compile：编译<br>mvn test：测试<br>mvn package：打包</p>
</blockquote>
<blockquote>
<p>mvn clean ：删除 target<br>mvn install：安装 jar 包到本地仓库，一般是将自己 compile 的 jar 包加入到本地仓库中，也就是如果一个项目用到另一个项目中的文件，我们可以这样使用</p>
</blockquote>
<h2 id="自动创建目录骨架"><a href="#自动创建目录骨架" class="headerlink" title="自动创建目录骨架"></a>自动创建目录骨架</h2><p>mvn archetype:generate -DgroupId&#x3D;top.wuxiya.maven04 -DartifactId&#x3D;maven04-demo -Dversion&#x3D;1.0.0SNAPSHOT -Dpackage&#x3D;top.wuxiya.maven04-demo</p>
<h2 id="坐标和仓库"><a href="#坐标和仓库" class="headerlink" title="坐标和仓库"></a>坐标和仓库</h2><p>坐标是地址，用于找到对应的 jar 包，也就是 dependence</p>
<p>包括：groupId,artiFactId,version</p>
<p>仓库：本地和远程</p>
<h2 id="maven-声明周期"><a href="#maven-声明周期" class="headerlink" title="maven 声明周期"></a>maven 声明周期</h2><p>每个证明周期是相互独立的，每个周期的内部有一定的依赖和顺序，运行之后的命令，自动执行之前的依赖</p>
<p><strong>clean</strong> 清理项目 分为三个阶段：</p>
<blockquote>
<p>pre-clean 执行清理前的工作<br>clean 清理上一次构建生成的所有文件<br>post-clean 执行清理后的文件</p>
</blockquote>
<p><strong>default</strong> 构建项目</p>
<blockquote>
<p>compile test package install</p>
</blockquote>
<p><strong>site</strong> 生成项目站点，根据 pom</p>
<blockquote>
<p>pre-site 之前的工作<br>site 生成项目的站点文档<br>post-site 生成之后的工作<br>site-deploy 发布生成的站点到服务器上</p>
</blockquote>
<p>对于 maven 而言，所有的命令都是调用插件来使用的</p>
<h2 id="pom-xml-常用元素介绍"><a href="#pom-xml-常用元素介绍" class="headerlink" title="pom.xml 常用元素介绍"></a>pom.xml 常用元素介绍</h2><ul>
<li><p><project>：根元素，包含了一些约束信息</p>
</li>
<li><p><modelVersion>：指定了 pom 的版本，固定的 4.0.0</p>
</li>
<li><p>坐标信息：</p>
</li>
<li><p>项目坐标信息：<groupId>，<artiFactId>，<version>，<packaging></p>
</li>
<li><p><name>：项目的描述名，一般在产生项目文档的时候使用</p>
</li>
<li><p><url>：项目的地址</p>
</li>
<li><p><description>：项目的描述</p>
</li>
<li><p><developers>：开发人员的列表</p>
</li>
<li><p><licenses>：开源框架的许可证信息</p>
</li>
<li><p><organization>：组织信息</p>
</li>
<li><p><dependencies>：依赖列表 &gt; <dependence>：<br>依赖包的坐标信息:<groupId>，<artiFactId>，<version>；<br><type>；<br><scope>：依赖的范围，如 test，表示只在测试的范围有用；<optional>：true&#x2F;false，用来设置依赖是否可选，默认是 false；<br><exclusions>：排除依赖传递列表 &gt; <exclusion>：A-&gt;B-&gt;C，那么 C 对于 A 来说就是传递依赖</p>
</li>
<li><p><dependencyManagement>：依赖的管理 &gt; <dependencies> &gt; <dependency> （并不会运行，而是用于子模块的继承）</p>
</li>
<li><p><build> &gt; <plugins> 插件信息 &gt; <plugin> &gt; 坐标信息</p>
</li>
<li><p><parent>：用于在子模块中对于父模块的继承</p>
</li>
<li><p><modules>：用于聚合多个 maven 项目，如果我们有很多个 maven 模块，那么可以一次性编译，而不是一个一个编译</p>
</li>
</ul>
<h2 id="依赖的范围"><a href="#依赖的范围" class="headerlink" title="依赖的范围"></a>依赖的范围</h2><p>重点来看<dependency> &gt; <scope>。<br>如果要使用某一个框架，需要将框架加入到 classPath 中，这样就可以使用该框架。</p>
<p>maven 中有三种 classpath，分别是 <strong>编译，测试，运行</strong>。<br>junit 只存在于 test 的范围。</p>
<p>由此可见范围是用于管理依赖包的使用范围。</p>
<ul>
<li>compile：默认，三种都有效</li>
<li>provided：测试和编译，如发布的时候容器里面已经有 API 了</li>
<li>runtime：测试和运行，JDBC 的应用</li>
<li>test：junit 的应用</li>
<li>system：</li>
<li>import：只在 management 中使用</li>
</ul>
<h2 id="依赖的传递"><a href="#依赖的传递" class="headerlink" title="依赖的传递"></a>依赖的传递</h2><p>A-&gt;B-&gt;C</p>
<p>如果 A 引入 B 的 jar 包，那么会默认导入 C 包，这个时候如果不需要 C 包，我们在<dependences> &gt; <dependency>B 中，加入<exclusions>：排除依赖传递列表 &gt; <exclusion>：C 的坐标</p>
<h2 id="依赖冲突"><a href="#依赖冲突" class="headerlink" title="依赖冲突"></a>依赖冲突</h2><p>如果 A 依赖了同一个构件的不同版本，那么会产生冲突</p>
<ul>
<li>短路优先：优先解析路径段的版本<br>A-&gt;B-&gt;C-&gt;X(jar)<br>A-&gt;D-&gt;X(jar)<br>那么优先解析短的路径</li>
<li>路径相同，优先解析先声明的版本</li>
</ul>
<h2 id="聚合和继承"><a href="#聚合和继承" class="headerlink" title="聚合和继承"></a>聚合和继承</h2><p><strong>聚合</strong></p>
<p>对于不同的 maven 项目，我们需要相互调用的时候必须一个一个 install 到本地的仓库中才可以调用。</p>
<p>我们可以将不同的 maven 项目聚合一次性运行。</p>
<p>新建一个 maven 项目，packaging 用 pom，用<modules>：用于聚合多个 maven 项目，如果我们有很多个 maven 模块，那么可以一次性编译，而不是一个一个编译。</p>
<p><strong>继承</strong><br>新建一个 maven 项目，packaging 用 pom，删除 main 和 test，依赖放在 manegement 中。</p>
<p>在子项目中，<parent>中引入父亲</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/" rel="tag">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/" rel="tag">Spring Cloud</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%B3%BB%E5%88%97%E5%AD%A6%E4%B9%A0/">微服务系列学习</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-docker学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/07/25/docker%E5%AD%A6%E4%B9%A0/" class="article-date">
  	<time datetime="2022-07-25T10:31:00.000Z" itemprop="datePublished">2022-07-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/25/docker%E5%AD%A6%E4%B9%A0/">
        Docker学习
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="docker-的技术实现"><a href="#docker-的技术实现" class="headerlink" title="docker 的技术实现"></a>docker 的技术实现</h2><p>命名空间，控制组（CGgroups），联合文件系统（union file system）</p>
<ul>
<li>CGgroups：资源的隔离,和资源的分配</li>
</ul>
<h2 id="docker-组成"><a href="#docker-组成" class="headerlink" title="docker 组成"></a>docker 组成</h2><p>镜像 image，容器 container，网络 network，数据卷 volume</p>
<p>优势：利用 AUFS 对镜像进行增量更新，方便共用镜像；写时复制更快</p>
<h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>只读的文件包，包含了虚拟环境运行的最原始文件系统的内容</p>
<h3 id="数据卷"><a href="#数据卷" class="headerlink" title="数据卷"></a>数据卷</h3><p>为保证数据的独立性，可以基于 docker 的 unionfs，建立独立的目录持久存放数据，或者在文件中共享；通过这几种方式实现持久化，或者数据共享，我们称之为数据卷</p>
<h3 id="container"><a href="#container" class="headerlink" title="container"></a>container</h3><p>启动与 PID 为 1 的进程共生命；写时复制的机制，启动时，利用 unionfs 将镜像以只读的方式挂载到沙盒文件中。</p>
<h3 id="network"><a href="#network" class="headerlink" title="network"></a>network</h3><p>容器网络模型核心组成：沙盒（Sandbox），网络（Network），端点（Endpoint）</p>
<p>有五种驱动，其中两种常用 Bridge Driver,Overlay Driver</p>
<p>Bridge，是默认网络驱动可以通过软硬件来实现网桥；Overlay 通过 Docker 集群模块来搭建，可以跨物理主机的虚拟网络。</p>
<h2 id="docker-指令"><a href="#docker-指令" class="headerlink" title="docker 指令"></a>docker 指令</h2><blockquote>
<p>启动 docker：sudo systemctl start docker<br>开机自启动：sudo systemctl enable docker<br>docker info</p>
</blockquote>
<h3 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h3><blockquote>
<p>拉取镜像：docker pull <name>(默认为 latest 版本)<br>docker images<br>docker search <a href="name:version">name:version</a><br>docker rmi <a href="name:version">name:version</a></p>
</blockquote>
<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><blockquote>
<p>创建：docker create –name <name> <a href="name:version">name:version</a><br>运行： docker start name<br>二合一： docker run -d –name <name> <a href="name:version">name:version</a>(合并指令，run 为前台，-d 转为后台运行)<br>docker rm <name>(docker 记得随用随删)<br>docker ps<br>docker ps -a<br>查看容器具体信息：docker inspect <name><br>进入容器启动 bash：docker exec -it <name> bash<br>nginx -s top&#x2F;quit(进入后停止)<br>exit(进入后退出)</p>
</blockquote>
<h3 id="容器网络"><a href="#容器网络" class="headerlink" title="容器网络"></a>容器网络</h3><p>(network 暴露接口)(<a target="_blank" rel="noopener" href="https://blog.csdn.net/Michaelwubo/article/details/82493006">https://blog.csdn.net/Michaelwubo/article/details/82493006</a>)</p>
<blockquote>
<p>–expose（暴露容器 port），EXPOSE 与-P（dockersfile 中使用），-p（指定宿主机的 port 与容器 port 的映射）<br>创建新的虚拟子网：docker network create -d <drivername> <netname>(-d 可以指定新的网络驱动，默认是 bridge)<br>docker network ls&#x2F;rm <netname>&#x2F;..<br>docker run -d –name <name> –link <othername> –network <netname> –expose <port> –expose <port> <a href="name:version">name:version</a><br>docker -d –name <name> -p <a href="port:port">port:port</a> -p <a href="port:port">port:port</a> <a href="name:version">name:version</a></p>
</blockquote>
<h2 id="管理存储数据"><a href="#管理存储数据" class="headerlink" title="管理存储数据"></a>管理存储数据</h2><p>数据有三种挂载方式：Bind Mount，Volume，Tmpfs Mount</p>
<ul>
<li>Bind Mount：指定宿主系统文件目录，以及容器内部的路径</li>
<li>Volume：指定容器内部的路径，</li>
<li>Tmpfs Mount：系统内存中的一部分早容器的文件系统中，并不是持久的，其中的内容会随着容器的停止而消失</li>
</ul>
<h3 id="Bind-Mount"><a href="#Bind-Mount" class="headerlink" title="Bind Mount"></a>Bind Mount</h3><p>必须使用绝对路径不能相对路径，默认是 RW，如果只读，加:ro</p>
<blockquote>
<p>docker run -d –name <name> -v <host-path>:<container-path>(:ro) <a href="name:version">name:version</a>(或者是–volume )</p>
</blockquote>
<p>使用的场景：</p>
<ul>
<li>当我们需要从宿主系统共享配置的时候</li>
<li>把代码挂载进入容器，每次对代码的修改都可以直接在容器外部进行</li>
</ul>
<h3 id="Tmpfs-Mount-临时文件"><a href="#Tmpfs-Mount-临时文件" class="headerlink" title="Tmpfs Mount 临时文件"></a>Tmpfs Mount 临时文件</h3><blockquote>
<p>docker run -d –name <name> –tmpfs <host-path> <a href="name:version">name:version</a></p>
</blockquote>
<h3 id="Volume-使用数据卷"><a href="#Volume-使用数据卷" class="headerlink" title="Volume 使用数据卷"></a>Volume 使用数据卷</h3><p>无需知道数据存储在了宿主的哪里，一般默认在 docker 的资源区域(&#x2F;var&#x2F;lib&#x2F;docker)</p>
<blockquote>
<p>docker run -d –name <name> -v (<name>:)<container-path> <a href="name:version">name:version</a></p>
</blockquote>
<h3 id="共用数据卷"><a href="#共用数据卷" class="headerlink" title="共用数据卷"></a>共用数据卷</h3><p>我们用-v 来挂载的时候，如果数据卷不存在，那么会创建，否则直接引用</p>
<blockquote>
<p>-v html:…<br>-v html:…<br>直接创建数据卷：docker volume create <name><br>docker volume ls<br>docker volume rm <name><br>删除容器的时候，加 -v 删除关联的数据卷： docker volume rm -v <containername><br>删除没有容器引用的数据卷，用 prune：docker volume prune</p>
</blockquote>
<h3 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h3><p>数据卷容器不需要运行，用一个系统的镜像就可以</p>
<p>是容器间的文件系统的桥梁，可以像引用 network 一样引用,用–volumes-from 就可以</p>
<blockquote>
<p>docker create –name <volume-name> -v (name:)<container-path> ubuntu<br>docker run -d –name <name> –volumes-from <volume-name> <a href="name:version">name:version</a></p>
</blockquote>
<h3 id="迁移和备份数据卷"><a href="#迁移和备份数据卷" class="headerlink" title="迁移和备份数据卷"></a>迁移和备份数据卷</h3><p>对于临时容器，我们在 run 的时候加入 –rm，让容器在停止的时候自动删除</p>
<blockquote>
<p>docker run –rm –volumes-from appdata -v &#x2F;backup:&#x2F;backup ubuntu tar cvf &#x2F;backup&#x2F;backup.tar &#x2F;webapp&#x2F;storage<br>docker run –rm –volumes-from appdata -v &#x2F;backup:&#x2F;backup ubuntu tar xvf &#x2F;backup&#x2F;backup.tar -C &#x2F;webapp&#x2F;storage –strip</p>
</blockquote>
<h2 id="保存和共享数据"><a href="#保存和共享数据" class="headerlink" title="保存和共享数据"></a>保存和共享数据</h2><blockquote>
<p>1、容器–&gt;提交新的镜像：docker commit -m “desc” <name> <a href="name:version">name:version</a><br>2、导出镜像，可批量：docker save <image-name> &gt; <image-name>.tar<br>docker save -o .&#x2F;<image-name>.tar <image-name><br>3、恢复镜像，可批量：docker load &lt; <image-name>.tar<br>docker load -i .&#x2F;<image-name>.tar<br>合并 1 和 2：docker export -o .&#x2F;<image-name> <container-name><br>docker import .&#x2F;<image-name> <image>(注意 load 不可以指定名称，import 可以指定名称)</p>
</blockquote>
<h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul>
<li>使用变量：用 <ARG arg>来传参，在构建的时候传入指令<br>传入：docker build –build-arg arg&#x3D;value<br>只影响构建过程</li>
<li>环境变量：用<ENV arg value>来指定<br>可以影响基于此镜像创建的容器，因此可以在运行容器的时候，加入&lt;-e&#x2F;–env arg&#x3D;value&gt;来覆盖环境变量，如之前的 mysql</li>
</ul>
<p>ARG 和 ENV 在使用的时候，采用$arg 来占位，如出现冲突，ENV 的一直都会覆盖 ARG</p>
<h3 id="合并命令"><a href="#合并命令" class="headerlink" title="合并命令"></a>合并命令</h3><p>由于镜像是由多个镜像叠加而得，它是由 dockerfile 中的每条指令生成的，因此适度的合并 RUN 到一条指令中，会减少镜像层的数量，较少反复创建容器的次数，提高了镜像构建的速度。</p>
<p>建议将不容易变化的搭建过程放到前面，充分利用构建缓存提高镜像构建的速度。</p>
<p>合并指令的时候，将易变的和不易变的拆分，放到不同的指令里。</p>
<h2 id="Docker-Compose-管理容器"><a href="#Docker-Compose-管理容器" class="headerlink" title="Docker Compose 管理容器"></a>Docker Compose 管理容器</h2><p>Dockerfile 是将容器内部运行环境的搭建固化下来，那么 Docker Compose 是将多个容器运行的方式和配置固化下来。</p>
<p>使用步骤：</p>
<p>1、编写容器所需要的 Dockerfile<br>2、编写配置容器的 docker-compose.yml<br>3、使用 docker-compose 命令启动</p>
<blockquote>
<p>启动：docker-compose -f .&#x2F;name.yml -p pj-name up -d<br>(-f 指令 yml，否则是当前目录下的 yml；-p 指定项目名字；-d 在后台)<br>删除：docker-compose down</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker%E5%85%A5%E9%97%A8/" rel="tag">Docker入门</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E5%86%8C/" rel="tag">小册</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">技术学习笔记</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &amp;raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2022 xywu
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
</body>
</html>